<?php
/** @var \Magento\Framework\View\Element\Template $block */
/** @var \Magento\Framework\Escaper $escaper */
/** @var \Masaar\Breezeevo\ViewModel\Category $viewModel */
?>
<!-- DEBUG: subcategories.phtml reached -->
<?php
$viewModel = $block->getViewModel();
$subcategories = $viewModel->getSubcategories();
?>

<div style="border: 2px solid red; padding: 10px; margin: 10px 0;">
    <h3>Subcategories Debug Info:</h3>
    <pre><?php print_r($subcategories); ?></pre>
    <?php if (empty($subcategories)): ?>
        <p>No subcategories found or ViewModel returned empty array.</p>
    <?php endif; ?>
</div>

<?php if (!empty($subcategories)): ?>
    <div class="masaar-subnav-block" data-isolate-scroll="true">
        <div class="drag-scroll-wrapper">
            <div class="drag-scroll">
                <ul class="category-subnav-items">
                    <?php foreach ($subcategories as $subcategory): ?>
                        <li class="subnav-item<?= $subcategory['active'] ? ' active' : '' ?>">
                            <div class="drag-handle">
                                <a href="<?= $escaper->escapeUrl($subcategory['item']->getUrl()) ?>" class="subnav-link">
                                    <?= $escaper->escapeHtml($subcategory['item']->getName()) ?>
                                </a>
                            </div>
                        </li>
                    <?php endforeach; ?>
                </ul>
            </div>
        </div>
    </div>
<?php endif; ?>